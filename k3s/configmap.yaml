apiVersion: v1
kind: ConfigMap
metadata:
  name: areyouok-config
  namespace: areyouok
data:
  # 环境配置
  ENVIRONMENT: "production"
  LOGGER_FORMAT: "json"
  LOGGER_LEVEL: "INFO"
  
  # PostgreSQL 配置
  POSTGRESQL_HOST: "postgres"
  POSTGRESQL_PORT: "5432"
  POSTGRESQL_DATABASE: "areyouok"
  POSTGRESQL_USER: "postgres"
  POSTGRESQL_SCHEMA: "public"
  POSTGRESQL_SSLMODE: "disable"
  
  # Redis 配置
  REDIS_ADDR: "redis:6379"
  REDIS_PREFIX: "ayok"
  
  # Redis Sentinel 配置（高可用模式）
  # 启用后会忽略 REDIS_ADDR，改为通过 Sentinel 连接
  REDIS_SENTINEL_ENABLED: "false"
  REDIS_SENTINEL_MASTER: "mymaster"
  REDIS_SENTINEL_ADDRS: "redis-sentinel:26379"
  
  # RabbitMQ 配置
  RABBITMQ_ADDR: "rabbitmq"
  RABBITMQ_PORT: "5672"
  RABBITMQ_USERNAME: "guest"
  RABBITMQ_VHOST: "/"
  
  # Captcha 配置
  CAPTCHA_PROVIDER: "aliyun"
  CAPTCHA_EXPIRE_SECONDS: "120"
  CAPTCHA_SLIDER_THRESHOLD: "2"
  CAPTCHA_MAX_DAILY: "10"
  
  # 支付宝网关
  ALIPAY_GATEWAY: "https://openapi.alipay.com/gateway.do"
  
  # JWT 配置
  JWT_EXPIRE_MINUTES: "30"
  JWT_REFRESH_DAYS: "7"
  
  # Waitlist 配置
  WAITLIST_MAX_USERS: "1000"
  
  # 默认 SMS 额度（cents）
  DEFAULT_SMS_QUOTA: "100"
  
  # 限流配置
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_RPS: "100"
  
  # 数据库连接池
  POSTGRESQL_MAX_OPEN: "200"
  POSTGRESQL_MAX_IDLE: "30"
  
  # OpenTelemetry 配置（可观测性组件部署后生效）
  OTEL_EXPORTER_OTLP_ENDPOINT: "otel-collector:4317"

